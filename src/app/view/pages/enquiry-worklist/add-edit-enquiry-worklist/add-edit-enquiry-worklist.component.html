<!-- <main id="main" class="main"> -->
  <mat-card>
    <mat-card-title class="mat-card-title-style">{{addEditHeadTitle}} Enquiry Worklist
      <i class="ri-close-line cursor_pointer closeModelDialog" (click)="cancelAddEditForm()"></i>
    </mat-card-title>
    <mat-card-actions class="p-2">
      <form [formGroup]="addEditForm">
        <div class="row leadDetailsStyle">
          <div  [ngClass]=" allLeadDetails?.isConvertedToLead == false && allLeadDetails.email == null  && data.type == 'view' ? 'col-12'  : 'col-6 br_gainsboro' ">
            <!--  class="col-6 br_gainsboro"  -->
            <div class="row">
              <br>
              <div class="card">
                <span class="mb-2 CardTitleStyle text-primary">Enquiry Details : </span>
                <div class="row">
                  <div class="col-6 mb-2">
                    <h5>Enquiry ID</h5>
                    <label class="d-block o_07">{{allLeadDetails.enquiryId}}</label>
                  </div>
                  <div class="col-6 mb-2">
                    <h5>Name</h5>
                    <label class="d-block o_07 verifiedLabel">{{allLeadDetails.firstName}} {{allLeadDetails?.middleName}} {{allLeadDetails.lastName}}
                      <i *ngIf="allLeadDetails?.isPanNameValid == false" class="ri-close-circle-line text-danger mobileVerifiedIcon" style="top:-6px"></i>
                      <i *ngIf="allLeadDetails?.isPanNameValid == true" class="ri-checkbox-circle-line text-success mobileVerifiedIcon"></i>
                    </label>
                  </div>
                  <div class="col-6 mb-2">
                    <h5>Mobile No.</h5>
                    <label class="d-block o_07 verifiedLabel">{{allLeadDetails.mobileNo}}
                      <i *ngIf="allLeadDetails.isMobileVerified == true" class="ri-checkbox-circle-line text-success mobileVerifiedIcon"></i>
                    </label>
                  </div>
                  <div class="col-6 mb-2">
                    <h5>Product</h5>
                    <label class="d-block o_07">{{allLeadDetails.product?.productName}}</label>
                  </div>
                  <div class="col-6 mb-2">
                    <h5>City</h5>
                    <label class="d-block o_07">{{allLeadDetails.city?.cityName}}</label>
                  </div>
                  <div class="col-6 mb-2">
                    <h5>Pincode</h5>
                    <label class="d-block o_07">{{allLeadDetails.pincode?.pincode}}</label>
                  </div>
                  <div class="col-6 mb-2">
                    <h5>Branch Name</h5>
                    <label class="d-block o_07">{{allLeadDetails.pincode?.branch?.branchName}}</label>
                  </div>
                  <div class="col-6 mb-2">
                    <h5>Area</h5>
                    <label class="d-block o_07">{{allLeadDetails.pincode?.areaName}}</label>
                  </div>
                </div>
              </div>
              <!-- <div class="card">
                <span class="mb-2 CardTitleStyle text-primary">Lead Information :</span>
                  <div class="row">
                    <div class="col-6 mb-2">
                      <h5>Lead Source</h5>
                      <label class="d-block o_07">{{allLeadDetails.leadSource?.leadSourceName}}</label>
                    </div>
                    <div class="col-6 mb-2">
                      <h5>Lead Stage</h5>
                      <label class="d-block o_07">{{allLeadDetails.leadStage}}</label>
                    </div>
                    <div class="col-6 mb-2"  *ngIf="allLeadDetails.leadStatus?.id == '1'">
                      <h5>Lead Status</h5>
                      <label class="d-block o_07">{{allLeadDetails?.leadStatus?.leadStatus}}</label>
                    </div>
                    <div class="col-6 mb-2">
                      <h5>Asssined To</h5>
                      <label class="d-block o_07">{{allLeadDetails.assignTo?.firstName}} {{allLeadDetails.assignTo?.lastName}}</label>
                    </div>
                  </div>
              </div> -->
            </div>

            <div class="row" *ngIf="ViewEnquiryScheduleScreen">
              <!--*ngIf="ViewEnquiryScheduleScreen" -->
              <div class="card">
                <span class="mb-2 CardTitleStyle text-primary">Enquiry Schedule Details :</span>
                <div class="row">
              <div class="col-6 mb-2">
                  <h5>Schedule Date</h5>
                  <label class="d-block o_07">{{allScheduleDetails[0]?.scheduleDate == null? '-' : allScheduleDetails[0]?.scheduleDate | date:'d MMMM , y'}}</label>
              </div>
              <div class="col-6 mb-2">
                <h5>Convenient Time</h5>
                <label class="d-block o_07">{{allScheduleDetails[0]?.convenientTime == null? '-' : allScheduleDetails[0]?.convenientTime | date:"h:mm a"}}</label>
              </div>
              <div class="col-6 mb-2">
                <h5>Created On </h5>
                <label class="d-block o_07">{{allScheduleDetails[0]?.createdTime | date:'d MMMM , y'}}</label>
            </div>
              <div class="col-6 mb-2" *ngIf="allScheduleDetails[0]?.loanRemark == null">
                <h5>Enquiry Status</h5>
                <label class="d-block o_07">{{allLeadDetails.enquiryStatus?.enquiryStatusName}}</label>
              </div>
              <div class="col-12 mb-2">
                <h5>Comments</h5>
                <label class="d-block o_07">{{allScheduleDetails[0]?.scheduledRemark}}</label>
              </div>
              </div>
              </div>
              <!-- <p class="boredrBottomCore"></p> -->
            </div>

            <div class="row" *ngIf="ViewEnquiryScheduleCommentsScreen">
              <!-- *ngIf="ViewEnquiryScheduleCommentsScreen" -->
              <div class="card">
                <span class="mb-2 CardTitleStyle text-primary">Enquiry Schedule Details :</span>
                  <div class="row cpommentScrollStyle mt-0">
                    <div *ngFor="let item of allScheduleDetails">
                      <div class="commentsStyle">
                        <div class="row">
                          <div class="col-7">{{item.scheduledRemark | truncate:[20,'...']}}</div>
                          <div class="col-5"><span class="fontSize10px">Created On - &nbsp;{{item.createdTime | date:'d MMMM , y'}}</span></div>
                        </div>
                      <!-- <div>{{item.scheduledRemark | truncate:[50,'...']}}</div> -->
                      <div class="marginTop7px">
                        <span class="fontSize10px">Schedule Date - &nbsp;{{item.scheduleDate | date:'d MMMM , y'}}</span>&nbsp;<span class="marginLeft40px fontSize10px">{{item.convenientTime | date:"h:mm a"}}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="marginLeft40px fontSize10px">Enquiry Status:&nbsp;{{allLeadDetails.enquiryStatus?.enquiryStatusName}}</span>
                      </div>

                    </div>
                  </div>
              </div>
              </div>
              <!-- <p class="boredrBottomCore"></p> -->
            </div>

          </div>
          <div [ngClass]=" allLeadDetails?.isConvertedToLead != true && allLeadDetails.email == null  && data.type == 'view' ? ' '  : 'col-6' " >
            <!-- [ngClass]="'col-6' "  -->
            <div class="row"   *ngIf="enguiryScheduleScreen">
              <!--  *ngIf="LeadScheduleScreen" -->

              <!-- <span class="mb-3 leadTitle">Lead Schedule :</span> -->
              <div class="card autoFoucusStyle">
                <span class="mb-2 CardTitleStyle text-primary">Enquiry Schedule :</span>
                <div class="row">

              <div class="col-6 mt-2">
                <div class="row mb-2">
                  <!-- <div class="col-4 mt-2"><label for="scheduleDate">Schedule Date<span
                        class="text-danger"> *</span></label></div>
                  <div class="col-8"> -->
                    <mat-form-field class="w-100" >
                      <input matInput [matDatepicker]="picker1" autocomplete="off" (focus)="picker1.open()"
                      [min]="todayDate" formControlName="scheduleDate" placeholder="Select Schedule Date (DD/MM/YYYY)">
                      <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                      <mat-datepicker #picker1></mat-datepicker>
                      <mat-error
                        *ngIf="isControlHasError('scheduleDate','required')">
                        Schedule Date is <strong>required</strong>
                      </mat-error>
                    </mat-form-field>
                  </div>
                <!-- </div> -->
              </div>
              <div class="col-6 mt-2">
                <div class="row mb-2">
                  <!-- <div class="col-4 mt-2"><label for="convenientTime">Convenient
                      Time<span
                        class="text-danger"> *</span></label></div>
                  <div class="col-8"> -->

                    <!-- <mat-form-field class="w-100" >
                      <mat-select formControlName="convenientTime"
                        placeholder="Select Convenient Time">
                        <mat-option *ngFor="let time of ConvenientTime"
                          [value]="time.value">
                          {{time.viewValue}}
                        </mat-option>
                      </mat-select>
                      <mat-error
                        *ngIf="isControlHasError('convenientTime','required')">
                        Convenient Time <strong>required</strong>
                      </mat-error>
                    </mat-form-field> -->

                    <!-- <mat-form-field class="example-full-width" >
                      <input type="time" matInput formControlName="convenientTime"
                        placeholder="Select Time">
                      <mat-error *ngIf="isControlHasError('convenientTime','required')">
                        Time is <strong>required</strong>
                      </mat-error>
                    </mat-form-field> -->

                    <mat-form-field class="example-full-width" >
                      <input matInput [ngxMatTimepicker]="picker" readonly="" formControlName="convenientTime" placeholder="Select Time" />
                      <ngx-mat-timepicker #picker></ngx-mat-timepicker>
                      <mat-error *ngIf="isControlHasError('convenientTime','required')">
                        Time is <strong>required</strong>
                      </mat-error>
                    </mat-form-field>

  <!--
                    <mat-form-field class="example-full-width">
                      <mat-label>Time</mat-label>
                      <input formControlName="time" matTimepicker>
                    </mat-form-field> -->
                  <!-- <mat-form-field class="example-full-width">
                    <mat-label>Time</mat-label>
                    <input matTimepicker>
                    </mat-form-field> -->

                  <!-- </div> -->
                </div>
              </div>
              <div class="col-6">
                <div class="row mb-2">
                  <!-- <div class="col-4 mt-2"><label for="leadScheduleStatus">Lead Status<span class="text-danger"> *</span></label></div>
                  <div class="col-8"> -->
                    <mat-form-field class="w-100" (click)="focusEnquiryLoanStatus()" >
                      <mat-select formControlName="leadScheduleStatus"
                        [placeholder]="enquiryStatusPlaceholderName">

                        <mat-optgroup >
                          <mat-form-field style="width:100%;padding-top: 9px;">
                            <input #searchEnquiryStatus autocomplete="off" [formControl]="searchEnquiryStatusTextboxControl" placeholder="Search" aria-label="Search" matInput (keyup)="searchDropdown(searchEnquiryStatus.value,'leadScheduleStatus')">
                            <button [disableRipple]="true" *ngIf="searchEnquiryStatus.value" matSuffix mat-icon-button aria-label="Clear" (click)="clearSearch($event,'leadScheduleStatus')">
                            <i class="ri-close-line cursor_pointer fontSize18px"></i>
                            </button>
                          </mat-form-field>
                          </mat-optgroup>
                          <mat-optgroup *ngIf="filterEnquiryStatusName?.length == 0">
                            <div>No results found!</div>
                      </mat-optgroup>

                        <mat-option *ngFor="let name of filterEnquiryStatusName" [value]="name.id">
                          {{name.enquiryStatusName}}
                        </mat-option>
                      </mat-select>
                      <mat-error *ngIf="isControlHasError('leadScheduleStatus','required')">
                        Enquiry Status is <strong>required</strong>
                      </mat-error>
                    </mat-form-field>
                  <!-- </div> -->
                </div>
              </div>

              <div class="col-12 mb-2">
                <div class="row mb-2">
                  <!-- <div class="col-2 mt-2"><label for="scheduledRemark">Comments<span
                        class="text-danger"> *</span></label></div>
                  <div class="col-10"> -->
                    <mat-form-field class="example-full-width" >
                      <textarea maxlength="500" matInput formControlName="scheduledRemark" placeholder="Enter Comments"></textarea>
                      <mat-error *ngIf="isControlHasError('scheduledRemark','required')">
                        Comments is <strong>required</strong>
                      </mat-error>
                    </mat-form-field>
                  </div>
                <!-- </div> -->
                <div class="row cpommentScrollStyle">
                  <div *ngFor="let item of allScheduleDetails">
                    <div class="commentsStyle">
                    <div>{{item.scheduledRemark}}</div>
                    <div class="marginTop7px">
                      <span class="fontSize10px">Create on - &nbsp;{{item.createdTime | date:'d MMMM , y'}}     </span>
                      <!-- <span class="marginLeft40px fontSize10px">     {{item.convenientTime | date:"h:mm a"}}</span> -->
                    </div>
                  </div>
                  </div>
                </div>
              </div>

              </div>
              </div>
            </div>

            <div class="row" *ngIf="ViewEnquiryRemainingScreen">
              <!--*ngIf="ViewEnquiryScheduleScreen" -->
              <div class="card">
                <span class="mb-2 CardTitleStyle text-primary">Enquiry Details :</span>
                <div class="row">
              <div class="col-6 mb-2">
                  <h5>Email Id</h5>
                  <label class="d-block o_07">{{allLeadDetails.email}}</label>
              </div>
              <div class="col-6 mb-2">
                <h5>Gender</h5>
                <label class="d-block o_07">{{allLeadDetails.email}}</label>
            </div>
            <div class="col-6 mb-2">
              <h5>Date of Birth</h5>
              <label class="d-block o_07 verifiedLabel">{{allLeadDetails.dateOfBirth | date:'d MMMM , y'}}
                <i *ngIf="allLeadDetails?.isPanValid == false" class="ri-close-circle-line text-danger mobileVerifiedIcon" style="top:-6px"></i>
                <i *ngIf="allLeadDetails?.isPanValid == true" class="ri-checkbox-circle-line text-success mobileVerifiedIcon"></i>
              </label>
            </div>
            <div class="col-6 mb-2">
              <h5>Pan Number</h5>
              <label class="d-block o_07 verifiedLabel">{{allLeadDetails.pan}}<i *ngIf="allLeadDetails.isPanVerified == true " class="ri-checkbox-circle-line text-success mobileVerifiedIcon"></i></label>
            </div>
            <div class="col-6 mb-2">
              <h5>Addhar Number</h5>
              <label class="d-block o_07">{{allLeadDetails.aadhar}}</label>
            </div>
            <div class="col-6 mb-2">
              <h5>Assign To</h5>
              <label class="d-block o_07">{{allLeadDetails.assignTo.firstName}} {{allLeadDetails.assignTo.lastName}}</label>
            </div>
              </div>
              </div>
              <!-- <p class="boredrBottomCore"></p> -->
            </div>

            <div class="row" *ngIf="EnquiryRemainingScreen">
              <!-- *ngIf="EnquiryRemainingScreen" -->
              <!-- [ngClass]="VerifyBtnDiv ? '' : 'autoFoucusStyle' " -->

              <div class="card autoFoucusStyle" >
                <span class="mb-2 CardTitleStyle text-primary">Enquiry Details :</span>
                <div class="row">

                <div class="col-6 mt-2">
                  <div class="row mb-2">
                    <!-- <div class="col-4 mt-2"><label for="email">Email Id<span class="text-danger"> *</span></label></div>
                    <div class="col-8"> -->
                      <mat-form-field class="example-full-width" >
                        <input type="email" matInput formControlName="email" placeholder="Enter Email Id">
                        <mat-error *ngIf="isControlHasError('email','required')">
                          Email Id is <strong>required</strong>
                        </mat-error>
                        <mat-error *ngIf="isControlHasError('email','email')">
                          Please enter Valid Email Id
                        </mat-error>
                      </mat-form-field>
                    <!-- </div> -->
                  </div>
                </div>
                <div class="col-6 mt-2">
                  <div class="row mb-2">
                    <!-- <div class="col-4 mt-2"><label for="gender">Gender<span class="text-danger"> *</span></label></div>
                    <div class="col-8"> -->
                      <mat-form-field class="w-100" >
                        <mat-select formControlName="gender" placeholder="Select Gender">
                          <mat-option *ngFor="let name of genderName" [value]="name.viewValue">
                            {{name.viewValue}}
                          </mat-option>
                        </mat-select>
                        <mat-error *ngIf="isControlHasError('gender','required')">
                          Gender is <strong>required</strong>
                        </mat-error>
                      </mat-form-field>
                    <!-- </div> -->
                  </div>
                </div>
                <div class="col-6">
                  <div class="row mb-2">
                    <!-- <div class="col-4 mt-2"><label for="dateOfBirth">Date of Birth<span class="text-danger">
                          *</span></label></div>
                    <div class="col-8"> -->
                      <mat-form-field class="w-100" >
                        <!--  [max]="maxDob"  -->
                        <input autocomplete="off" matInput (focus)="picker.open()" (keyup)="changeDate()"
                          [matDatepicker]="picker" formControlName="dateOfBirth" placeholder="Select Date Of Birth (DD/MM/YYYY)">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-error *ngIf="isValidAge">
                          Age should be <strong>more than 18 </strong>
                        </mat-error>
                        <mat-error *ngIf="isControlHasError('dateOfBirth','required')">
                          Date of Birth is <strong>required</strong>
                        </mat-error>
                      </mat-form-field>
                    <!-- </div> -->
                  </div>
                </div>
                <div class="col-6">
                  <div class="row mb-2">
                    <!-- <div class="col-4 mt-2"><label for="pan">Pan Number<span class="text-danger"> *</span></label></div>
                    <div class="col-8"> -->
                      <mat-form-field class="example-full-width" >
                        <input type="text" #panCard matInput pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}" formControlName="pan" (keyup)="addEditForm.get('pan')?.patchValue(panCard.value.toUpperCase());checkAlreadyExit($event)" maxlength="10" placeholder="Enter Pan Number">
                        <mat-error *ngIf="isControlHasError('pan','pattern') || panPatternError">
                          For Example <strong>BNZAA2318J</strong>
                        </mat-error>
                        <mat-error *ngIf="isControlHasError('pan','required')">
                          Pan Number is <strong>required</strong>
                        </mat-error>
                        <mat-error *ngIf="panExistError">
                          Pan Number is <strong>Already Exist.</strong>
                        </mat-error>
                      </mat-form-field>
                    <!-- </div> -->
                  </div>
                </div>
                <div class="col-6">
                  <div class="row mb-2">
                    <!-- <div class="col-4 mt-2"><label for="aadhar">Addhar Number<span class="text-danger"> *</span></label></div>
                    <div class="col-8"> -->
                      <mat-form-field class="example-full-width" >
                        <input type="text" matInput formControlName="aadhar"
                          (keypress)="omitSpecialChar($event);omitCharacters($event);" minlength="12" maxlength="12"
                          placeholder="Enter Addhar Number">
                        <mat-error *ngIf="isControlHasError('aadhar','pattern')">
                          This field required only numeric values
                        </mat-error>
                        <mat-error *ngIf="isControlHasError('aadhar','required')">
                          Addhar Number is <strong>required</strong>
                        </mat-error>
                        <mat-error *ngIf="isControlHasError('aadhar','maxlength') || isControlHasError('aadhar','minlength')">
                          Addhar Number should be in 12 digits only
                        </mat-error>
                      </mat-form-field>
                    <!-- </div> -->
                  </div>
                </div>

                </div>
                </div>

                <!-- <p class="boredrBottomCore"></p> -->
              </div>

          </div>
        </div>
      </form>
      <div class="btn_group boredrTopCore mt-2">
        <button mat-raised-button class="mt-3" (click)="cancelAddEditForm()">Close</button>
        <!-- <button mat-raised-button *ngIf="saveBtn" class="Save_btn" (click)="saveAddEditForm()">Save</button> -->
        <button mat-raised-button class="mt-3" color="primary" *ngIf="CloseEnquiryBtn" (click)="CloseEnquiry()">Close Enquiry</button>
        <button mat-raised-button class="mt-3" *ngIf="ReScheduledBtn" (click)="ReScheduled()" color="primary">{{ReScheduledBtnName}}</button>
        <button mat-raised-button class="mt-3" *ngIf="crateleadBtnNameBtn" (click)="createAddEditForm()" color="primary">{{crateleadBtnName}}</button>
        <!-- <button mat-raised-button *ngIf="createBtn" (click)="createAddEditForm()" color="primary">{{createAddEditBtnName}}</button> -->
        </div>
    </mat-card-actions>
  </mat-card>
  <!-- </main> -->
